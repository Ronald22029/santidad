import{c as ie,a5 as ue,a6 as me,a as O,h as L,I as W,t as he,a7 as pe,a8 as fe,a9 as ge,f as be,w as _e,aa as ye,ab as ve,A as ke,_ as Se,ac as we,q as Ce,D as y,E,F as p,G as r,H as l,M as q,T as N,V as f,S as A,W as j,Q as B,J as xe,L as qe,P as G,O as Y,ad as Me,X as Ne,$ as Ae,a0 as Be}from"./index.5effc10a.js";import{Q as P}from"./QSkeleton.7841a267.js";import{Q as K}from"./QBadge.df07c94b.js";import{Q as ee}from"./QImg.ff3d7b43.js";import{Q as R}from"./QChip.ca08b57d.js";import{Q as Ee,a as Ie,b as H}from"./QList.473be783.js";import{Q as te}from"./QItemLabel.016cf6df.js";import{Q as De}from"./QSpinnerDots.105b468b.js";import{Q as Pe}from"./QPage.0698cd62.js";var J=ie({name:"QBreadcrumbsEl",props:{...ue,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(e,{slots:t}){const{linkTag:s,linkAttrs:i,linkClass:o,navigateOnClick:a}=me(),c=O(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(e.disable!==!0?"q-link--focusable"+o.value:"q-breadcrumbs__el--disable"),...i.value,onClick:a})),d=O(()=>"q-breadcrumbs__el-icon"+(e.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const b=[];return e.icon!==void 0&&b.push(L(W,{class:d.value,name:e.icon})),e.label!==void 0&&b.push(e.label),L(s.value,{...c.value},he(t.default,b))}}});const Le=["",!0];var Oe=ie({name:"QBreadcrumbs",props:{...pe,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:e=>["none","xs","sm","md","lg","xl"].includes(e),default:"sm"}},setup(e,{slots:t}){const s=fe(e),i=O(()=>`flex items-center ${s.value}${e.gutter==="none"?"":` q-gutter-${e.gutter}`}`),o=O(()=>e.separatorColor?` text-${e.separatorColor}`:""),a=O(()=>` text-${e.activeColor}`);return()=>{const c=ge(be(t.default));if(c.length===0)return;let d=1;const b=[],_=c.filter(u=>u.type!==void 0&&u.type.name==="QBreadcrumbsEl").length,n=t.separator!==void 0?t.separator:()=>e.separator;return c.forEach(u=>{if(u.type!==void 0&&u.type.name==="QBreadcrumbsEl"){const g=d<_,S=u.props!==null&&Le.includes(u.props.disable),w=(g===!0?"":" q-breadcrumbs--last")+(S!==!0&&g===!0?a.value:"");d++,b.push(L("div",{class:`flex items-center${w}`},[u])),g===!0&&b.push(L("div",{class:"q-breadcrumbs__separator"+o.value},n()))}else b.push(u)}),L("div",{class:"q-breadcrumbs"},[L("div",{class:i.value},b)])}}});const ze=Object.prototype.toString,X=Object.prototype.hasOwnProperty,Fe=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(e=>"[object "+e+"]"));function se(e){if(e!==Object(e)||Fe.has(ze.call(e))===!0||e.constructor&&X.call(e,"constructor")===!1&&X.call(e.constructor.prototype,"isPrototypeOf")===!1)return!1;let t;for(t in e);return t===void 0||X.call(e,t)}function ne(){let e,t,s,i,o,a,c=arguments[0]||{},d=1,b=!1;const _=arguments.length;for(typeof c=="boolean"&&(b=c,c=arguments[1]||{},d=2),Object(c)!==c&&typeof c!="function"&&(c={}),_===d&&(c=this,d--);d<_;d++)if((e=arguments[d])!==null)for(t in e)s=c[t],i=e[t],c!==i&&(b===!0&&i&&((o=Array.isArray(i))||se(i)===!0)?(o===!0?a=Array.isArray(s)===!0?s:[]:a=se(s)===!0?s:{},c[t]=ne(b,a,i)):i!==void 0&&(c[t]=i));return c}let $=null,oe;const Q=[];function Qe(e){e.title&&(e.title=e.titleTemplate?e.titleTemplate(e.title):e.title,delete e.titleTemplate),[["meta","content"],["link","href"]].forEach(t=>{const s=e[t[0]],i=t[1];for(const o in s){const a=s[o];a.template&&(Object.keys(a).length===1?delete s[o]:(a[i]=a.template(a[i]||""),delete a.template))}})}function Te(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const s in e)if(e[s]!==t[s])return!0}function ae(e){return["class","style"].includes(e)===!1}function re(e){return["lang","dir"].includes(e)===!1}function je(e,t){const s={},i={};return e===void 0?{add:t,remove:i}:(e.title!==t.title&&(s.title=t.title),["meta","link","script","htmlAttr","bodyAttr"].forEach(o=>{const a=e[o],c=t[o];if(i[o]=[],a==null){s[o]=c;return}s[o]={};for(const d in a)c.hasOwnProperty(d)===!1&&i[o].push(d);for(const d in c)a.hasOwnProperty(d)===!1?s[o][d]=c[d]:Te(a[d],c[d])===!0&&(i[o].push(d),s[o][d]=c[d])}),{add:s,remove:i})}function Re({add:e,remove:t}){e.title&&(document.title=e.title),Object.keys(t).length!==0&&(["meta","link","script"].forEach(s=>{t[s].forEach(i=>{document.head.querySelector(`${s}[data-qmeta="${i}"]`).remove()})}),t.htmlAttr.filter(re).forEach(s=>{document.documentElement.removeAttribute(s)}),t.bodyAttr.filter(ae).forEach(s=>{document.body.removeAttribute(s)})),["meta","link","script"].forEach(s=>{const i=e[s];for(const o in i){const a=document.createElement(s);for(const c in i[o])c!=="innerHTML"&&a.setAttribute(c,i[o][c]);a.setAttribute("data-qmeta",o),s==="script"&&(a.innerHTML=i[o].innerHTML||""),document.head.appendChild(a)}}),Object.keys(e.htmlAttr).filter(re).forEach(s=>{document.documentElement.setAttribute(s,e.htmlAttr[s]||"")}),Object.keys(e.bodyAttr).filter(ae).forEach(s=>{document.body.setAttribute(s,e.bodyAttr[s]||"")})}function $e(){$=null;const e={title:"",titleTemplate:null,meta:{},link:{},script:{},htmlAttr:{},bodyAttr:{}};for(let t=0;t<Q.length;t++){const{active:s,val:i}=Q[t];s===!0&&ne(!0,e,i)}Qe(e),Re(je(oe,e)),oe=e}function F(){$!==null&&clearTimeout($),$=setTimeout($e,50)}function Ue(e){{const t={active:!0};if(typeof e=="function"){const s=O(e);t.val=s.value,_e(s,i=>{t.val=i,t.active===!0&&F()})}else t.val=e;Q.push(t),F(),ye(()=>{t.active=!0,F()}),ve(()=>{t.active=!1,F()}),ke(()=>{Q.splice(Q.indexOf(t),1),F()})}}const I="https://farmaciasantidaddivina.com",Ve={name:"DetalleProducto",data(){return{id:this.$route.params.id,product:{},loading:!0,cantidad:1,es_porcentaje:!1,sucursales:[],relacionados:[],relLoading:!1,fallbackUsed:!1,apiError:!1,imgBust:Date.now(),imgReady:!1,zoom:{on:!1,x:50,y:50},reqSeq:0}},setup(){const e=we(),t="Santidad Divina | Farmacia Santidad Divina",s=new URL(e.path||"/",I).toString();return Ue({title:t,meta:{description:{name:"description",content:"Compra este producto en Farmacia Santidad Divina. Entrega r\xE1pida y precios solidarios."},robots:{name:"robots",content:"index, follow, max-image-preview:large"},"og:type":{property:"og:type",content:"product"},"og:title":{property:"og:title",content:t},"og:description":{property:"og:description",content:"Compra este producto en Farmacia Santidad Divina. Entrega r\xE1pida y precios solidarios."},"og:site_name":{property:"og:site_name",content:"Farmacia Santidad Divina"},"og:locale":{property:"og:locale",content:"es_BO"},"og:url":{property:"og:url",content:s},"twitter:card":{name:"twitter:card",content:"summary_large_image"}},link:{canonical:{rel:"canonical",href:s}}}),{}},computed:{detailKey(){return`${this.id}-${this.imgBust}`},imgKey(){var e;return`${this.id}-${((e=this.product)==null?void 0:e.imagen)||"noimg"}-${this.imgBust}`},imgSrc(){var s;const e=(s=this.product)==null?void 0:s.imagen;let t=e?String(e).includes("http")?e:`${this.$url}../images/${e}`:"/images/placeholder-producto.png";return t+=(t.includes("?")?"&":"?")+"v="+this.imgBust,t},ahorro(){var s,i;if(!this.es_porcentaje)return"0.00";const e=Number(((s=this.product)==null?void 0:s.precioNormal)||0),t=Number(((i=this.product)==null?void 0:i.precio)||0);return(e-t).toFixed(2)},total(){var t;return(Number(((t=this.product)==null?void 0:t.precio)||0)*(Number(this.cantidad)||0)).toFixed(2)},availableStock(){return this.sucursales.reduce((e,t)=>e+Number(t.cantidad||0),0)},stockMostrado(){const e=this.availableStock;return e>100?100:e},zoomImgStyle(){const e={transition:"transform .15s ease-out, transform-origin .1s ease-out",willChange:"transform"};return this.zoom.on?(e.transform="scale(2)",e.transformOrigin=`${this.zoom.x}% ${this.zoom.y}%`,e.cursor="zoom-out"):(e.transform="scale(1)",e.transformOrigin="center center",e.cursor="zoom-in"),e}},watch:{"$route.params.id":{async handler(e){this.id=e,window.scrollTo({top:0,behavior:"smooth"}),await this.prepareForNewProduct(),await this.initLoad()}},"product.imagen"(){this.bumpImg()}},async mounted(){await this.initLoad()},methods:{abs(e){return e?/^https?:\/\//i.test(e)?e:e.startsWith("/")?`${I}${e}`:`${I}/images/${e}`:`${I}/images/placeholder-producto.png`},cleanText(e=""){return String(e).replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim()},seoTitleFrom(e){const t=(e==null?void 0:e.nombre)||"Santidad Divina",s=e!=null&&e.presentacion?` ${e.presentacion}`:"",i=e!=null&&e.marca?` | ${e.marca}`:"";return`${t}${s}${i} | Farmacia Santidad Divina`},seoDescFrom(e){const t=this.cleanText((e==null?void 0:e.descripcion)||"");return(t?`${t} Producto disponible en Farmacia Santidad Divina. Compra online en Oruro.`:`Compra ${(e==null?void 0:e.nombre)||"este producto"} en Farmacia Santidad Divina. Entrega r\xE1pida y precios solidarios.`).substring(0,155)},ensureMetaName(e,t){let s=document.head.querySelector(`meta[name="${e}"]`);s||(s=document.createElement("meta"),s.setAttribute("name",e),document.head.appendChild(s)),s.setAttribute("content",t||"")},ensureMetaProp(e,t){let s=document.head.querySelector(`meta[property="${e}"]`);s||(s=document.createElement("meta"),s.setAttribute("property",e),document.head.appendChild(s)),s.setAttribute("content",t||"")},ensureCanonical(e){let t=document.head.querySelector('link[rel="canonical"]');t||(t=document.createElement("link"),t.setAttribute("rel","canonical"),document.head.appendChild(t)),t.setAttribute("href",e)},setJsonLd(e,t){let s=document.getElementById(e);s||(s=document.createElement("script"),s.type="application/ld+json",s.id=e,document.head.appendChild(s)),s.textContent=JSON.stringify(t)},applySEO(){var a;const e=this.product||{},t=this.seoTitleFrom(e),s=this.seoDescFrom(e),i=this.abs(e==null?void 0:e.imagen),o=new URL(this.$route.path||"/",I).toString();document.title=t,this.ensureMetaName("description",s),this.ensureMetaName("keywords",["farmacia","medicamento","salud","Bolivia",e==null?void 0:e.nombre,e==null?void 0:e.marca,e==null?void 0:e.composicion].filter(Boolean).join(", ")),this.ensureMetaName("robots","index, follow, max-image-preview:large"),this.ensureMetaName("author","Farmacia Santidad Divina"),this.ensureMetaName("publisher","Farmacia Santidad Divina"),this.ensureMetaProp("og:site_name","Farmacia Santidad Divina"),this.ensureMetaProp("og:locale","es_BO"),this.ensureMetaProp("og:type","product"),this.ensureMetaProp("og:title",t),this.ensureMetaProp("og:description",s),this.ensureMetaProp("og:image",i),this.ensureMetaProp("og:image:secure_url",i),this.ensureMetaProp("og:url",o),this.ensureMetaName("twitter:card","summary_large_image"),this.ensureMetaName("twitter:title",t),this.ensureMetaName("twitter:description",s),this.ensureMetaName("twitter:image",i),this.ensureCanonical(o),this.setJsonLd("ld-product",{"@context":"https://schema.org","@type":"Product",name:(e==null?void 0:e.nombre)||"Producto",description:s,image:[i],sku:(e==null?void 0:e.sku)||void 0,brand:e!=null&&e.marca?{"@type":"Brand",name:e.marca}:void 0,offers:{"@type":"Offer",priceCurrency:"BOB",price:String((a=e==null?void 0:e.precio)!=null?a:""),availability:(Number(e==null?void 0:e.stock)||0)>0?"https://schema.org/InStock":"https://schema.org/OutOfStock",url:o}}),this.setJsonLd("ld-breadcrumbs",{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Inicio",item:I},{"@type":"ListItem",position:2,name:"Productos",item:`${I}/productos`},{"@type":"ListItem",position:3,name:(e==null?void 0:e.nombre)||"Producto",item:o}]})},async prepareForNewProduct(){this.imgReady=!1,this.imgBust=Date.now(),this.fallbackUsed=!1,this.product={},this.es_porcentaje=!1,this.cantidad=1,this.sucursales=this.sucursales.map(e=>({...e,cantidad:0})),this.zoom={on:!1,x:50,y:50},await Ce()},bumpImg(){this.imgBust=Date.now()},async initLoad(){(!this.sucursales||this.sucursales.length===0)&&await this.getSucursales(),await this.getProduct(),await this.fetchRelacionados()},toggleDrawer(){this.drawer=!this.drawer},navigateTo(e){this.$router.push(e),this.drawer=!1},buscar(){const e=(this.search||"").trim();!e||(this.$router.push({name:"buscar",query:{q:e,page:1}}),this.drawer=!1)},onImgError(e){this.fallbackUsed||(this.fallbackUsed=!0,e!=null&&e.target&&(e.target.src="/images/placeholder-producto.png"),this.bumpImg())},resolveImage(e){return e?String(e).includes("http")?e:`${this.$url}../images/${e}`:"/images/placeholder-producto.png"},handleZoomMove(e){const s=e.currentTarget.getBoundingClientRect(),i=(e.clientX-s.left)/s.width*100,o=(e.clientY-s.top)/s.height*100;this.zoom.x=Math.max(0,Math.min(100,i)),this.zoom.y=Math.max(0,Math.min(100,o))},async getSucursales(){const{data:e}=await this.$axios.get("sucursales");this.sucursales=(e||[]).map(t=>({...t,cantidad:Number(t.cantidad||0)}))},async getProduct(){var s,i;const e=this.$route.params.id;if(!e)return;const t=++this.reqSeq;this.loading=!0,this.$q.loading.show();try{const{data:o}=await this.$axios.get(`productos/${e}`);if(t!==this.reqSeq)return;this.product={...o},Number(this.product.porcentaje)>0?(this.es_porcentaje=!0,this.product.precioNormal=this.product.precio,this.product.precio=(this.product.precio-this.product.precio*this.product.porcentaje/100).toFixed(2)):this.es_porcentaje=!1,this.sucursales=this.sucursales.map(a=>({...a,cantidad:Number(this.product[`cantidadSucursal${a.id}`]||0)})),this.cantidad=1,this.fallbackUsed=!1,this.bumpImg(),this.imgReady=!0,this.applySEO()}catch(o){if(t!==this.reqSeq)return;this.apiError=!0,this.$q.notify({type:"negative",message:((i=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:i.message)||"Error cargando producto"})}finally{t===this.reqSeq&&(this.loading=!1,this.$q.loading.hide())}},async fetchRelacionados(){var t,s;const e=(((t=this.product)==null?void 0:t.composicion)||"").trim();if(this.relacionados=[],!!e){this.relLoading=!0;try{const o=Number(this.product.id),a=Number((s=this.product)==null?void 0:s.subcategory_id)||null,c=!0,d=(m="")=>String(m).normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/([a-z])(\d)/gi,"$1 $2").replace(/(\d)([a-z])/gi,"$1 $2").replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim(),b=(m="")=>this.norm(String(m).replace(/([a-z])(\d)/gi,"$1 $2").replace(/(\d)([a-z])/gi,"$1 $2")),_=(m="")=>{const h=/\b(\d+(?:[.,]\d+)?)\s*(mg|ml|mcg|µg|ug|g|gr|kg|l|ui|%)\b/gi,v=[];let M;for(;(M=h.exec(String(m)))!==null;){const x=String(parseFloat(M[1].replace(",","."))),T=M[2].toLowerCase();v.push(`${x}${T}`)}return v.sort().join("|")},n=_(e),u=d(e),g=Array.from(new Set(u.split(" ").filter(m=>m&&m.length>=3))),S=[];u&&S.push({search:u}),g.slice(0,5).forEach(m=>S.push({search:m})),a&&S.push({subcategory_id:a});const w=S.map(m=>this.$axios.get("productos",{params:{...m,page:1,per_page:200}}).then(({data:h})=>{var v;return(h==null?void 0:h.data)||((v=h==null?void 0:h.products)==null?void 0:v.data)||h||[]}).catch(()=>[])),C=await Promise.all(w),D=new Map;for(const m of C)for(const h of m){const v=Number(h==null?void 0:h.id);!v||v===o||D.has(v)||D.set(v,h)}const z=Array.from(D.values());if(z.length===0){this.relacionados=[];return}const ce=b(e),le=.55,de=.35,U=[];for(const m of z){if(c&&n&&_(m.composicion||m.nombre||"")!==n)continue;const h=b(m.composicion||m.nombre||""),v=this.similarity(ce,h),M=Boolean((m.composicion||"").trim()),x=M?v:Math.min(v+.2,.5);x>0&&U.push({p:m,score:x,hasComp:M})}U.sort((m,h)=>{if(h.score!==m.score)return h.score-m.score;const v=Number(m.p.subcategory_id)===a?1:0,M=Number(h.p.subcategory_id)===a?1:0;if(M!==v)return M-v;const x=Number(m.p.precio)||0,T=Number(h.p.precio)||0;return x-T});const Z=new Set,V=[];for(const{p:m,score:h,hasComp:v}of U){if(!(v?h>=le:h>=de)||Z.has(m.id))continue;const x={...m};if(Number(x.porcentaje)>0&&(x.precioNormal=x.precio,x.precio=(x.precio-x.precio*x.porcentaje/100).toFixed(2)),V.push(x),Z.add(m.id),V.length>=50)break}this.relacionados=V}catch(i){console.error("Error cargando relacionados",i),this.relacionados=[]}finally{this.relLoading=!1}}},norm(e){let t=String(e).normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/([a-z])(\d)/gi,"$1 $2").replace(/(\d)([a-z])/gi,"$1 $2");const s={ibuproneo:"ibuprofeno",acetaminofen:"paracetamol",dc:"compresion directa",sr:"liberacion sostenida",gr:"gastroresistente",reistente:"gastroresistente"};for(const[i,o]of Object.entries(s))t=t.replace(new RegExp(`\\b${i}\\b`,"g"),o);return t=t.replace(/\bgastro\s+resistente\b/g,"gastroresistente"),t.replace(/[^a-z0-9\s]/g," ").replace(/\b(comprimidos?|tabletas?|capsulas?|capsula[s]?|solucion|jarabe|unguento|crema|spray)\b/g," ").replace(/\s+/g," ").trim()},similarity(e,t){if(!e||!t)return 0;const s=Array.from(new Set(e.split(" ").filter(Boolean))),i=Array.from(new Set(t.split(" ").filter(Boolean)));if(!s.length||!i.length)return 0;const o=(_,n)=>{if(_===n)return 0;const u=_.length,g=n.length;if(!u)return g;if(!g)return u;const S=Array.from({length:u+1},(w,C)=>Array.from({length:g+1},(D,z)=>C===0?z:z===0?C:0));for(let w=1;w<=u;w++)for(let C=1;C<=g;C++){const D=_[w-1]===n[C-1]?0:1;S[w][C]=Math.min(S[w-1][C]+1,S[w][C-1]+1,S[w-1][C-1]+D)}return S[u][g]},a=(_,n)=>{if(_===n)return!0;const u=o(_,n),g=Math.max(_.length,n.length);return g<=4?u<=1:g<=7?u<=2:u<=3},c=new Set;let d=0;for(const _ of s)for(let n=0;n<i.length;n++)if(!c.has(n)&&a(_,i[n])){c.add(n),d++;break}const b=new Set([...s,...i]).size||1;return d/b},clickDetalleProducto(e){String(e.id)!==String(this.id)&&this.$router.push("/detalle-producto/"+e.id+"/"+this.slugify(e.nombre))},slugify(e){return String(e).replace(/ |\/|\./g,"-").replace(/,/g,"")},onCantidadBlur(){const e=Number(this.cantidad);(!Number.isFinite(e)||e<1)&&(this.cantidad=1)},decCantidad(){this.cantidad=Math.max(1,Number(this.cantidad||1)-1)},incCantidad(){const e=this.availableStock,t=Number(this.cantidad||1)+1;this.cantidad=Math.min(t,e||t)},async addCarrito(e,t){var o,a;if(!await this.checkStockBeforeAdd(t))return;const i={...e,cantidad:t};this.$store.addCarrito(i),(a=(o=this.$alert)==null?void 0:o.success)==null||a.call(o,"Producto a\xF1adido al carrito")},async addCart(e,t){if(!await this.checkStockBeforeAdd(t))return;const i=`Deseo comprar ${t} ${e.nombre} a Bs. ${e.precio} c/u. Total Bs. ${(e.precio*t).toFixed(2)}`;window.open(`https://wa.me/59172319869?text=${encodeURIComponent(i)}`)},async checkStockBeforeAdd(e){const t=this.availableStock,s=Number(e||0);return!Number.isFinite(s)||s<1?(this.$q.notify({type:"warning",message:"Cantidad inv\xE1lida (m\xEDnimo 1)."}),!1):s>t?(this.$q.notify({type:"negative",message:`Stock insuficiente. Disponible: ${t}.`}),!1):!0},share(){var t,s;const e={title:(t=this.product)==null?void 0:t.nombre,text:(s=this.product)==null?void 0:s.descripcion,url:window.location.href};navigator.share?navigator.share(e).catch(()=>{}):this.$q.notify({message:"Compartir no soportado en este dispositivo",color:"grey-7"})}}},k=e=>(Ae("data-v-af4ace76"),e=e(),Be(),e),Ke=k(()=>r("div",{class:"page-spacer"},null,-1)),He={class:"container q-px-md q-mx-auto"},Je={key:0,class:"q-mt-lg"},Xe={class:"row q-col-gutter-xl"},We={class:"col-12 col-md-5"},Ze={class:"col-12 col-md-7"},Ge={class:"col-12 col-md-5 flex items-start justify-center"},Ye={class:"zoom-hint"},et={class:"media-actions"},tt={class:"col-12 col-md-7"},st={class:"product-title"},ot={class:"price-card q-mt-sm q-mb-md"},at={class:"now grad-pill"},rt={key:0,class:"before"},it={class:"meta-row"},nt=k(()=>r("span",{class:"meta-key"},"Unidad",-1)),ct={class:"meta-val"},lt={class:"meta-row"},dt=k(()=>r("span",{class:"meta-key"},"Principio activo",-1)),ut={class:"meta-val"},mt={class:"meta-row"},ht=k(()=>r("span",{class:"meta-key"},"Distribuidora",-1)),pt={class:"meta-val"},ft={class:"meta-row"},gt=k(()=>r("span",{class:"meta-key"},"Laboratorio",-1)),bt={class:"meta-val"},_t={class:"meta-row"},yt=k(()=>r("span",{class:"meta-key"},"Pa\xEDs origen",-1)),vt={class:"meta-val"},kt={class:"meta-row"},St=k(()=>r("span",{class:"meta-key"},"Reg. sanitario",-1)),wt={class:"meta-val"},Ct={class:"qty-row q-mb-md"},xt=k(()=>r("div",{class:"qty-title"},"Cantidad",-1)),qt={class:"qty-controls glass soft-shadow"},Mt={class:"qty-unit"},Nt={class:"total-box glass soft-shadow"},At=k(()=>r("div",{class:"total-label"},"Total",-1)),Bt={class:"total-value"},Et={class:"row q-col-gutter-sm"},It={class:"col-12 col-sm-4"},Dt={class:"col-12 col-sm-4"},Pt={class:"col-12 col-sm-4"},Lt={class:"q-mt-xl"},Ot=k(()=>r("div",{class:"section-title"},"Descripci\xF3n",-1)),zt=["innerHTML"],Ft={class:"q-mt-xl"},Qt=k(()=>r("div",{class:"section-title"},"Disponibilidad en sucursales",-1)),Tt={class:"q-mt-xl"},jt=k(()=>r("div",{class:"section-title"},"Productos relacionados",-1)),Rt={key:0,class:"text-center q-my-lg"},$t={key:1,class:"text-grey-6 q-mt-sm"},Ut={key:2,class:"contenedor-productos q-mt-md"},Vt={class:"products-grid"},Kt={key:0,class:"out-of-stock-overlay"},Ht=k(()=>r("span",{class:"out-of-stock-text"},"Sin Stock",-1)),Jt=[Ht],Xt={class:"product-name"},Wt={class:"product-prices"},Zt={key:0,class:"price-old"},Gt=k(()=>r("span",null,"Antes",-1)),Yt=k(()=>r("br",null,null,-1)),es={class:"price-now"},ts=k(()=>r("span",null,"Ahora",-1)),ss=k(()=>r("br",null,null,-1)),os={key:0,class:"sticky-cta glass soft-shadow"},as={class:"sticky-price"},rs=k(()=>r("div",{class:"label"},"Total",-1)),is={class:"value"},ns={class:"sticky-actions"},cs={class:"sticky-stepper"},ls={class:"sticky-qty"};function ds(e,t,s,i,o,a){return y(),E(Pe,{class:"q-pa-none modern-bg"},{default:p(()=>{var c,d,b,_;return[Ke,r("div",He,[l(Oe,{class:"q-mb-md text-grey-6"},{default:p(()=>{var n;return[l(J,{label:"Inicio",to:"/"}),l(J,{label:"Productos",to:"/"}),l(J,{label:((n=o.product)==null?void 0:n.nombre)||"Detalle"},null,8,["label"])]}),_:1}),o.loading?(y(),q("div",Je,[r("div",Xe,[r("div",We,[l(P,{type:"rect",class:"skeleton-media"})]),r("div",Ze,[l(P,{type:"text",class:"q-mb-sm"}),l(P,{type:"text",width:"60%",class:"q-mb-md"}),l(P,{type:"rect",height:"140px",class:"q-mb-md"}),l(P,{type:"text"}),l(P,{type:"text",width:"70%"})])])])):(y(),q("div",{class:"row q-col-gutter-xl",key:a.detailKey},[r("div",Ge,[l(j,{flat:"",class:"media-wrap glass soft-shadow"},{default:p(()=>{var n,u;return[o.imgReady?(y(),q("div",{key:0,class:"zoom-area",onMousemove:t[0]||(t[0]=(...g)=>a.handleZoomMove&&a.handleZoomMove(...g)),onMouseenter:t[1]||(t[1]=g=>o.zoom.on=!0),onMouseleave:t[2]||(t[2]=g=>o.zoom.on=!1)},[(y(),E(ee,{key:a.imgKey,src:a.imgSrc,ratio:4/3,fit:"contain",class:"media-img","img-style":a.zoomImgStyle,onError:a.onImgError,alt:(n=o.product)!=null&&n.nombre?`Imagen de ${o.product.nombre}`:"Imagen de producto",title:((u=o.product)==null?void 0:u.nombre)||"Producto"},{default:p(()=>[o.es_porcentaje?(y(),E(K,{key:0,color:"red",floating:"",class:"text-bold"},{default:p(()=>[N("-"+f(o.product.porcentaje)+"%",1)]),_:1})):A("",!0)]),_:1},8,["src","img-style","onError","alt","title"])),r("div",Ye,[l(W,{name:"search",size:"18px"})])],32)):A("",!0),r("div",et,[l(R,{dense:"",outline:"",icon:"photo",color:"primary"},{default:p(()=>[N("Vista")]),_:1}),l(R,{dense:"",outline:"",icon:"verified",color:"teal"},{default:p(()=>[N("Original")]),_:1})])]}),_:1})]),r("div",tt,[r("h1",st,f((c=o.product)==null?void 0:c.nombre),1),r("div",ot,[r("div",at,"Bs. "+f((d=o.product)==null?void 0:d.precio),1),o.es_porcentaje?(y(),q("div",rt,"Antes: Bs. "+f((b=o.product)==null?void 0:b.precioNormal),1)):A("",!0),o.es_porcentaje?(y(),E(R,{key:1,color:"negative","text-color":"white",size:"sm",class:"q-ml-sm"},{default:p(()=>[N(" Ahorra Bs. "+f(a.ahorro),1)]),_:1})):A("",!0),l(R,{color:a.availableStock>0?"green-5":"grey-6","text-color":"white",size:"sm",class:"q-ml-sm"},{default:p(()=>[N(" Stock: "+f(a.stockMostrado),1)]),_:1},8,["color"])]),l(j,{flat:"",class:"meta-grid glass soft-shadow q-mb-md"},{default:p(()=>{var n,u,g,S,w,C;return[r("div",it,[nt,r("span",ct,f(((n=o.product)==null?void 0:n.unidad)||"-"),1)]),r("div",lt,[dt,r("span",ut,f(((u=o.product)==null?void 0:u.composicion)||"-"),1)]),r("div",mt,[ht,r("span",pt,f(((g=o.product)==null?void 0:g.distribuidora)||"-"),1)]),r("div",ft,[gt,r("span",bt,f(((S=o.product)==null?void 0:S.marca)||"-"),1)]),r("div",_t,[yt,r("span",vt,f(((w=o.product)==null?void 0:w.paisOrigen)||"-"),1)]),r("div",kt,[St,r("span",wt,f(((C=o.product)==null?void 0:C.registroSanitario)||"-"),1)])]}),_:1}),r("div",Ct,[xt,r("div",qt,[l(B,{round:"",unelevated:"",icon:"remove",class:"qty-btn",color:"primary",onClick:a.decCantidad,disable:o.cantidad<=1},null,8,["onClick","disable"]),l(qe,{modelValue:o.cantidad,"onUpdate:modelValue":t[3]||(t[3]=n=>o.cantidad=n),modelModifiers:{number:!0},type:"number",inputmode:"numeric",dense:"",borderless:"",class:"qty-input",onBlur:a.onCantidadBlur,onKeyup:t[4]||(t[4]=xe(n=>a.addCarrito(o.product,o.cantidad),["enter"])),"aria-live":"polite"},null,8,["modelValue","onBlur"]),l(B,{round:"",unelevated:"",icon:"add",class:"qty-btn",color:"primary",onClick:a.incCantidad,disable:a.availableStock<=0||o.cantidad>=a.availableStock},null,8,["onClick","disable"]),r("div",Mt,f((_=o.product)==null?void 0:_.unidad),1)]),r("div",Nt,[At,r("div",Bt,"Bs. "+f(a.total),1)])]),r("div",Et,[r("div",It,[l(B,{class:"full-width grad-btn big-cta",icon:"add_shopping_cart",label:"A\xF1adir al carrito","no-caps":"",onClick:t[5]||(t[5]=n=>a.addCarrito(o.product,o.cantidad)),disable:a.availableStock===0},null,8,["disable"])]),r("div",Dt,[l(B,{class:"full-width grad-btn-2 big-cta",icon:"shopping_cart",label:"Comprar ahora","no-caps":"",onClick:t[6]||(t[6]=n=>a.addCart(o.product,o.cantidad)),disable:a.availableStock===0},null,8,["disable"])]),r("div",Pt,[l(B,{class:"full-width glass-btn big-cta",icon:"share",label:"Compartir","no-caps":"",onClick:a.share},null,8,["onClick"])])])])])),r("div",Lt,[Ot,l(j,{flat:"",class:"glass soft-shadow q-pa-md"},{default:p(()=>{var n;return[r("div",{class:"descripcion",innerHTML:(n=o.product)==null?void 0:n.descripcion},null,8,zt)]}),_:1})]),r("div",Ft,[Qt,l(Ee,{bordered:"",separator:"",class:"rounded-borders glass soft-shadow"},{default:p(()=>[(y(!0),q(Y,null,G(o.sucursales,n=>(y(),E(Ie,{key:n.id},{default:p(()=>[l(H,{avatar:""},{default:p(()=>[l(Me,{size:"28px",color:"blue-1","text-color":"primary"},{default:p(()=>[l(W,{name:"store"})]),_:1})]),_:1}),l(H,null,{default:p(()=>[l(te,{class:"text-weight-medium"},{default:p(()=>[N(f(n.nombre),1)]),_:2},1024),l(te,{caption:""},{default:p(()=>[N(f(n.direccion),1)]),_:2},1024)]),_:2},1024),l(H,{side:""},{default:p(()=>[l(K,{color:n.cantidad>0?"green":"grey",label:n.cantidad>0?"Disponible":"Sin stock"},null,8,["color","label"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),r("div",Tt,[jt,o.relLoading?(y(),q("div",Rt,[l(De,{size:"50px",color:"primary"})])):o.relacionados.length===0?(y(),q("div",$t," No se encontraron productos con composici\xF3n similar. ")):(y(),q("div",Ut,[r("div",Vt,[(y(!0),q(Y,null,G(o.relacionados,n=>(y(),E(j,{key:n.id,class:"product-card-personalizada glass soft-shadow hover-pop",flat:"",onClick:u=>a.clickDetalleProducto(n)},{default:p(()=>[l(ee,{src:a.resolveImage(n.imagen),style:{height:"160px","object-fit":"cover",position:"relative"}},{default:p(()=>[Number(n.cantidad||0)===0?(y(),q("div",Kt,Jt)):A("",!0),Number(n.porcentaje)>0?(y(),E(K,{key:1,color:"red",floating:""},{default:p(()=>[N("-"+f(n.porcentaje)+"%",1)]),_:2},1024)):A("",!0)]),_:2},1032,["src"]),l(Ne,{class:"q-pa-sm text-center"},{default:p(()=>[r("div",Xt,f(n.nombre),1),r("div",Wt,[n.precioNormal?(y(),q("div",Zt,[Gt,Yt,r("strong",null,"Bs. "+f(n.precioNormal),1)])):A("",!0),r("div",es,[ts,ss,r("strong",null,"Bs. "+f(n.precio),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]))])]),o.loading?A("",!0):(y(),q("div",os,[r("div",as,[rs,r("div",is,"Bs. "+f(a.total),1)]),r("div",ns,[r("div",cs,[l(B,{round:"",dense:"",icon:"remove",color:"primary",onClick:a.decCantidad,disable:o.cantidad<=1},null,8,["onClick","disable"]),r("div",ls,f(o.cantidad),1),l(B,{round:"",dense:"",icon:"add",color:"primary",onClick:a.incCantidad,disable:a.availableStock<=0||o.cantidad>=a.availableStock},null,8,["onClick","disable"])]),l(B,{class:"grad-btn",icon:"add_shopping_cart",label:"A\xF1adir","no-caps":"",onClick:t[7]||(t[7]=n=>a.addCarrito(o.product,o.cantidad)),disable:a.availableStock===0},null,8,["disable"])])]))]}),_:1})}var vs=Se(Ve,[["render",ds],["__scopeId","data-v-af4ace76"]]);export{vs as default};
