import{c as H,X as U,Z as G,a as C,h as g,al as O,t as X,ap as Z,aq as J,aa as K,f as W,_ as Y,D as h,E as v,F as c,I as e,G as r,ar as $,H as w,T as a,S as m,Q as f,ak as ee,L as M,M as te,O as R,R as se}from"./index.6800c3a4.js";import{a as oe,Q as B}from"./QImg.af81b332.js";import{Q as le,a as S,b as z}from"./QItem.8149a9df.js";import{Q as re}from"./QList.3307b511.js";import{Q as ae}from"./QPage.5bd99926.js";var P=H({name:"QBreadcrumbsEl",props:{...U,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(s,{slots:o}){const{linkTag:x,linkAttrs:b,linkClass:t,navigateOnClick:u}=G(),d=C(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(s.disable!==!0?"q-link--focusable"+t.value:"q-breadcrumbs__el--disable"),...b.value,onClick:u})),p=C(()=>"q-breadcrumbs__el-icon"+(s.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const n=[];return s.icon!==void 0&&n.push(g(O,{class:p.value,name:s.icon})),s.label!==void 0&&n.push(s.label),g(x.value,{...d.value},X(o.default,n))}}});const ie=["",!0];var ce=H({name:"QBreadcrumbs",props:{...Z,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:s=>["none","xs","sm","md","lg","xl"].includes(s),default:"sm"}},setup(s,{slots:o}){const x=J(s),b=C(()=>`flex items-center ${x.value}${s.gutter==="none"?"":` q-gutter-${s.gutter}`}`),t=C(()=>s.separatorColor?` text-${s.separatorColor}`:""),u=C(()=>` text-${s.activeColor}`);return()=>{const d=K(W(o.default));if(d.length===0)return;let p=1;const n=[],k=d.filter(i=>i.type!==void 0&&i.type.name==="QBreadcrumbsEl").length,y=o.separator!==void 0?o.separator:()=>s.separator;return d.forEach(i=>{if(i.type!==void 0&&i.type.name==="QBreadcrumbsEl"){const _=p<k,Q=i.props!==null&&ie.includes(i.props.disable),q=(_===!0?"":" q-breadcrumbs--last")+(Q!==!0&&_===!0?u.value:"");p++,n.push(g("div",{class:`flex items-center${q}`},[i])),_===!0&&n.push(g("div",{class:"q-breadcrumbs__separator"+t.value},y()))}else n.push(i)}),g("div",{class:"q-breadcrumbs"},[g("div",{class:b.value},n)])}}});const ne={name:"DetalleProducto",data(){return{id:this.$route.params.id,product:{},loading:!0,cantidad:1,es_porcentaje:!1,sucursales:[]}},async mounted(){await this.getSucursales(),await this.getProduct()},methods:{async getSucursales(){const s=await this.$axios.get("sucursales");this.sucursales=s.data},async getProduct(){this.loading=!0,this.$q.loading.show();const s=await this.$axios.get(`productos/${this.id}`);if(this.product=s.data,this.product.porcentaje>0){this.es_porcentaje=!0,this.product.precioNormal=this.product.precio;const o=this.product.precio-this.product.precio*this.product.porcentaje/100;this.product.precio=o.toFixed(2)}this.sucursales.forEach(o=>{o.cantidad=this.product[`cantidadSucursal${o.id}`]}),this.loading=!1,this.$q.loading.hide()},addCarrito(s,o){this.$store.addCarrito({...s,...o}),this.$alert.success("Producto a\xF1adido al carrito")},addCart(s,o,x=!1){const b=`Deseo comprar ${o} ${s.nombre} a Bs. ${s.precio} c/u. Total Bs. ${(s.precio*o).toFixed(2)}`;window.open(`https://wa.me/59172319869?text=${b}`)},share(){const s={title:this.product.nombre,text:this.product.descripcion,url:window.location.href};navigator.share(s).then(()=>console.log("Successful share")).catch(o=>console.log("Error sharing",o))}}},de={class:"row"},ue={class:"col-12"},pe={class:"col-12 col-md-6"},he={class:"text-left q-px-md"},be={class:"text-h6"},_e=e("td",{class:"text-bold"},"Precio:",-1),me=e("td",{class:"text-bold"},"Unidad:",-1),ge=e("td",{class:"text-bold"},"Stock:",-1),xe=e("td",{class:"text-bold"},"Principio activo:",-1),ve=e("td",{class:"text-bold"},"Distribuidora:",-1),fe=e("td",{class:"text-bold"},"Laboratorio:",-1),Ce=e("td",{class:"text-bold"},"Pais origen:",-1),ke=e("td",{class:"text-bold"},"Registro sanitario:",-1),ye={class:"row"},Qe={class:"col-9 flex flex-center"},qe=e("span",{class:"text-bold"},"Cantidad:",-1),we={class:"text-bold"},Be={class:"col-3 bg-grey-4 text-right"},Se=e("label",{class:"text-bold"},"Total",-1),Pe={class:"text-bold justify-between"},De={class:"col-4 q-pa-xs"},je={class:"col-4 q-pa-xs"},Ee={class:"col-4 q-pa-xs"},Le={class:"q-pt-xs"},Ve=e("div",{class:"text-bold text-blue"},"Disponible en las siguientes sucursales:",-1),Ie={class:"col-12"},Ne=e("label",{class:"text-bold text-h6"},"Descripci\xF3n:",-1),Te=["innerHTML"],Fe=e("div",{class:"col-12"},[e("label",{class:"text-bold text-h6"},"Productos relacionados:")],-1);function Ae(s,o,x,b,t,u){return h(),v(ae,{class:"bg-grey-3 q-pa-md"},{default:c(()=>{var d,p,n,k,y,i,_,Q,q,D,j,E,L,V,I,N,T;return[e("div",de,[e("div",ue,[r(ce,null,{default:c(()=>{var l;return[r(P,{label:"Inicio",to:"/"}),r(P,{label:"Productos",to:"/"}),r(P,{label:(l=t.product)==null?void 0:l.nombre},null,8,["label"])]}),_:1})]),e("div",{class:$(`col-12 col-md-6 ${s.$q.screen.lt.md?"text-center":"text-right"}`)},[(d=t.product)!=null&&d.imagen?(h(),v(oe,{key:0,src:(p=t.product)!=null&&p.imagen.includes("http")?(n=t.product)==null?void 0:n.imagen:`${s.$url}../images/${(k=t.product)==null?void 0:k.imagen}`,"spinner-color":"white",style:{border:"2px solid #496aec","border-radius":"5px"},width:"250px","spinner-size":"40px"},null,8,["src"])):w("",!0)],2),e("div",pe,[e("div",he,[e("div",be,a((y=t.product)==null?void 0:y.nombre),1),e("table",null,[e("tr",null,[_e,e("td",null,[m(" Bs. "+a((i=t.product)==null?void 0:i.precio)+" ",1),t.es_porcentaje?(h(),v(B,{key:0,color:"red"},{default:c(()=>{var l,F,A;return[m(" Descuento "+a((l=t.product)==null?void 0:l.porcentaje)+"% - Bs. "+a((((F=t.product)==null?void 0:F.precio)*((A=t.product)==null?void 0:A.porcentaje)/100).toFixed(2)),1)]}),_:1})):w("",!0),e("span",null,[t.es_porcentaje?(h(),v(B,{key:0,color:"green"},{default:c(()=>{var l;return[m(" Bs. "+a((l=t.product)==null?void 0:l.precioNormal),1)]}),_:1})):w("",!0)])])]),e("tr",null,[me,e("td",null,a((_=t.product)==null?void 0:_.unidad),1)]),e("tr",null,[ge,e("td",null,a((Q=t.product)==null?void 0:Q.cantidad),1)]),e("tr",null,[xe,e("td",null,a((q=t.product)==null?void 0:q.composicion),1)]),e("tr",null,[ve,e("td",null,a((D=t.product)==null?void 0:D.distribuidora),1)]),e("tr",null,[fe,e("td",null,a((j=t.product)==null?void 0:j.marca),1)]),e("tr",null,[Ce,e("td",null,a((E=t.product)==null?void 0:E.paisOrigen),1)]),e("tr",null,[ke,e("td",null,a((L=t.product)==null?void 0:L.registroSanitario),1)])])]),e("div",ye,[e("div",Qe,[qe,r(f,{onClick:o[0]||(o[0]=l=>t.cantidad=t.cantidad-1),icon:"remove",dense:"",round:"",color:"primary",disable:t.cantidad<=1},null,8,["disable"]),r(ee,{modelValue:t.cantidad,"onUpdate:modelValue":o[1]||(o[1]=l=>t.cantidad=l),type:"number",min:"1",class:"text-center text-bold",outlined:"",dense:"",style:{"text-align":"center",width:"100px"}},null,8,["modelValue"]),r(f,{onClick:o[2]||(o[2]=l=>t.cantidad=t.cantidad+1),icon:"add",dense:"",round:"",color:"primary",disable:t.cantidad>=((V=t.product)==null?void 0:V.cantidad)},null,8,["disable"]),e("span",we,a((I=t.product)==null?void 0:I.unidad),1)]),e("div",Be,[Se,e("div",Pe,[m(" Bs. "),e("span",null,a((((N=t.product)==null?void 0:N.precio)*t.cantidad).toFixed(2)),1)])]),e("div",De,[r(f,{onClick:o[3]||(o[3]=l=>u.addCarrito(t.product,t.cantidad)),label:"A\xF1adir al carrito",icon:"add_shopping_cart",class:"full-width",color:"blue","no-caps":"",dense:""})]),e("div",je,[r(f,{onClick:o[4]||(o[4]=l=>u.addCart(t.product,t.cantidad,!0)),label:"Comprar ahora",icon:"shopping_cart",class:"full-width",color:"red","no-caps":"",dense:""})]),e("div",Ee,[r(f,{onClick:u.share,label:"Compartir",icon:"share",class:"full-width",color:"green","no-caps":"",dense:""},null,8,["onClick"])])]),e("div",Le,[Ve,r(re,{dense:""},{default:c(()=>[(h(!0),M(R,null,te(t.sucursales,l=>(h(),M(R,{key:l.id},[l.cantidad>0?(h(),v(le,{key:0,clickable:""},{default:c(()=>[r(S,{avatar:""},{default:c(()=>[r(se,null,{default:c(()=>[r(O,{name:"store"})]),_:1})]),_:1}),r(S,null,{default:c(()=>[r(z,null,{default:c(()=>[m(a(l.nombre),1)]),_:2},1024),r(z,{caption:""},{default:c(()=>[m(a(l.direccion),1)]),_:2},1024)]),_:2},1024),r(S,{side:""},{default:c(()=>[r(B,{color:"green",label:"Disponible: "+l.cantidad},null,8,["label"])]),_:2},1024)]),_:2},1024)):w("",!0)],64))),128))]),_:1})])]),e("div",Ie,[Ne,e("div",{class:"text-justify q-px-md",innerHTML:(T=t.product)==null?void 0:T.descripcion},null,8,Te)]),Fe])]}),_:1})}var Ue=Y(ne,[["render",Ae]]);export{Ue as default};
