import{_ as g,o as p,k as f,w as o,y as h,a as s,f as r,g as m,i as C,j as n,z as u,t as d,A as b,Q as w,n as v,p as c,B as k,q as y,e as x}from"./index.d4584c2d.js";const Q={name:"CarouselPage",data(){return{carousels:[],carousel:{},dialog:!1,loading:!1,columns:[{name:"id",label:"ID",align:"center",field:e=>e.id},{name:"image",label:"Imagen",align:"left",field:e=>e.image},{name:"status",label:"Estado",align:"center",field:e=>e.status}]}},mounted(){this.getCarousels()},methods:{fileChange(e){this.carousel.image=e.target.files[0]},carouselCreate(){this.dialog=!0,this.carousel={image:"",status:"active"}},getCarousels(){this.$axios.get("carousels").then(e=>{this.carousels=e.data}).catch(e=>{console.log(e)})},carouselSave(){if(!this.carousel.image)return this.$alert.error("Debe seleccionar una imagen"),!1;if(this.carousel.id){this.loading=!0;const e=new FormData;e.append("file",this.carousel.image),this.$axios.post("carouselsFile/"+this.carousel.id,e,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{this.getCarousels(),this.dialog=!1}).catch(a=>{console.log(a)}).finally(()=>{this.loading=!1})}else{this.loading=!0;const e=new FormData;e.append("file",this.carousel.image),this.$axios.post("carousels",e,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{this.getCarousels(),this.dialog=!1}).catch(a=>{console.log(a)}).finally(()=>{this.loading=!1})}},carouselDelete(e){this.$axios.delete("carousels/"+e.id).then(a=>{this.getCarousels()}).catch(a=>{console.log(a)})},carouselEdit(e,a){this.dialog=!0,this.carousel=a},carouselUpdate(e){this.loading=!0,e.status=e.status==="active"?"inactive":"active",this.$axios.put("carousels/"+e.id,e).then(a=>{console.log(a.data),this.dialog=!1}).catch(a=>{console.log(a)}).finally(()=>{this.loading=!1})},carouselSubmit(){this.carousel.id?this.carouselUpdate():this.carouselSave()}}};function D(e,a,V,S,t,i){return p(),f(h,{class:"q-pa-xs bg-grey-3"},{default:o(()=>[s(w,{dense:"",filter:e.filter,title:"Gestion carosel",rows:t.carousels,columns:t.columns,"row-key":"name","rows-per-page-options":[50,100],onRowClick:i.carouselEdit},{"top-right":o(()=>[s(r,{label:"Nuevo carucel",color:"positive",onClick:i.carouselCreate,icon:"add_circle",class:"q-mb-xs","no-caps":""},null,8,["onClick"]),s(m,{outlined:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":a[0]||(a[0]=l=>e.filter=l),placeholder:"Search"},{append:o(()=>[s(C,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-opcion":o(l=>[s(n,{key:"opcion",props:l,"auto-width":""},null,8,["props"])]),"body-cell-id":o(l=>[s(n,{key:"id",props:l,"auto-width":""},{default:o(()=>[u(d(l.row.id),1)]),_:2},1032,["props"])]),"body-cell-image":o(l=>[s(n,{key:"image",props:l,"auto-width":"",class:"text-center"},{default:o(()=>[s(b,{src:`${e.$url}../images/${l.row.image}`,width:"100px"},null,8,["src"])]),_:2},1032,["props"])]),"body-cell-status":o(l=>[s(n,{key:"status",props:l,"auto-width":""},{default:o(()=>[s(r,{rounded:"",size:"10px","no-caps":"",onClick:_=>i.carouselUpdate(l.row),color:l.row.status==="active"?"positive":"negative",label:l.row.status,"text-color":"white"},null,8,["onClick","color","label"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","columns","onRowClick"]),s(x,{modelValue:t.dialog,"onUpdate:modelValue":a[4]||(a[4]=l=>t.dialog=l),persistent:""},{default:o(()=>[s(v,null,{default:o(()=>[s(c,null,{default:o(()=>[s(c,{class:"q-pa-none text-bold row"},{default:o(()=>[u(d(t.carousel.id?"Editar":"Nuevo")+" carosel ",1),s(k),s(r,{flat:"",round:"",dense:"",icon:"close",onClick:a[1]||(a[1]=l=>t.dialog=!1)})]),_:1}),s(c,null,{default:o(()=>[y("input",{placeholder:"Imagen",type:"file",accept:"image/*",onChange:a[2]||(a[2]=(...l)=>i.fileChange&&i.fileChange(...l))},null,32)]),_:1}),s(c,{class:"text-right"},{default:o(()=>[s(r,{label:t.carousel.id?"Actualizar":"Guardar",color:t.carousel.id?"orange":"positive",onClick:i.carouselSave,loading:t.loading,icon:t.carousel.id?"edit":"save",class:"q-mb-xs","no-caps":""},null,8,["label","color","onClick","loading","icon"]),s(r,{label:"Cancelar",color:"negative",onClick:a[3]||(a[3]=l=>t.dialog=!1),icon:"cancel",loading:t.loading,class:"q-mb-xs","no-caps":""},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var I=g(Q,[["render",D]]);export{I as default};
