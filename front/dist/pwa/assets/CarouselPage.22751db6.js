import{_ as f,o as h,k as m,w as o,y as C,a as s,f as r,g as b,i as w,j as c,z as d,t as g,A as v,Q as k,n as y,p as u,B as x,q as Q,e as D}from"./index.53c11620.js";const V={name:"CarouselPage",data(){return{carousels:[],carousel:{},dialog:!1,loading:!1,columns:[{name:"id",label:"ID",align:"center",field:e=>e.id},{name:"image",label:"Imagen",align:"left",field:e=>e.image},{name:"status",label:"Estado",align:"center",field:e=>e.status}]}},mounted(){this.getCarousels()},methods:{fileChange(e){this.carousel.image=e.target.files[0]},carouselCreate(){this.dialog=!0,this.carousel={image:"",status:"active"}},getCarousels(){this.$axios.get("carousels").then(e=>{this.carousels=e.data}).catch(e=>{console.log(e)})},carouselSave(){if(!this.carousel.image)return this.$alert.error("Debe seleccionar una imagen"),!1;if(this.carousel.id){this.loading=!0;const e=new FormData;e.append("file",this.carousel.image),this.$axios.post("carouselsFile/"+this.carousel.id,e,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{this.getCarousels(),this.dialog=!1}).catch(a=>{console.log(a)}).finally(()=>{this.loading=!1})}else{this.loading=!0;const e=new FormData;e.append("file",this.carousel.image),this.$axios.post("carousels",e,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{this.getCarousels(),this.dialog=!1}).catch(a=>{console.log(a)}).finally(()=>{this.loading=!1})}},carouselDelete(e){this.$axios.delete("carousels/"+e.id).then(a=>{this.getCarousels()}).catch(a=>{console.log(a)})},carouselEdit(e,a){this.dialog=!0,this.carousel=a},carouselUpdate(e,a){a.stopPropagation(),this.loading=!0,e.status=e.status==="active"?"inactive":"active",this.$axios.put("carousels/"+e.id,e).then(n=>{console.log(n.data),this.dialog=!1}).catch(n=>{console.log(n)}).finally(()=>{this.loading=!1})},carouselSubmit(){this.carousel.id?this.carouselUpdate():this.carouselSave()}}};function S(e,a,n,_,t,i){return h(),m(C,{class:"q-pa-xs bg-grey-3"},{default:o(()=>[s(k,{dense:"",filter:e.filter,title:"Gestion carosel",rows:t.carousels,columns:t.columns,"row-key":"name","rows-per-page-options":[50,100],onRowClick:i.carouselEdit},{"top-right":o(()=>[s(r,{label:"Nuevo carucel",color:"positive",onClick:i.carouselCreate,icon:"add_circle",class:"q-mb-xs","no-caps":""},null,8,["onClick"]),s(b,{outlined:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":a[0]||(a[0]=l=>e.filter=l),placeholder:"Search"},{append:o(()=>[s(w,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-opcion":o(l=>[s(c,{key:"opcion",props:l,"auto-width":""},null,8,["props"])]),"body-cell-id":o(l=>[s(c,{key:"id",props:l,"auto-width":""},{default:o(()=>[d(g(l.row.id),1)]),_:2},1032,["props"])]),"body-cell-image":o(l=>[s(c,{key:"image",props:l,"auto-width":"",class:"text-center"},{default:o(()=>[s(v,{src:`${e.$url}../images/${l.row.image}`,width:"100px"},null,8,["src"])]),_:2},1032,["props"])]),"body-cell-status":o(l=>[s(c,{key:"status",props:l,"auto-width":""},{default:o(()=>[s(r,{rounded:"",size:"10px","no-caps":"",onClick:p=>i.carouselUpdate(l.row,p),color:l.row.status==="active"?"positive":"negative",label:l.row.status,"text-color":"white"},null,8,["onClick","color","label"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","columns","onRowClick"]),s(D,{modelValue:t.dialog,"onUpdate:modelValue":a[4]||(a[4]=l=>t.dialog=l),persistent:""},{default:o(()=>[s(y,null,{default:o(()=>[s(u,null,{default:o(()=>[s(u,{class:"q-pa-none text-bold row"},{default:o(()=>[d(g(t.carousel.id?"Editar":"Nuevo")+" carosel ",1),s(x),s(r,{flat:"",round:"",dense:"",icon:"close",onClick:a[1]||(a[1]=l=>t.dialog=!1)})]),_:1}),s(u,null,{default:o(()=>[Q("input",{placeholder:"Imagen",type:"file",accept:"image/*",onChange:a[2]||(a[2]=(...l)=>i.fileChange&&i.fileChange(...l))},null,32)]),_:1}),s(u,{class:"text-right"},{default:o(()=>[s(r,{label:t.carousel.id?"Actualizar":"Guardar",color:t.carousel.id?"orange":"positive",onClick:i.carouselSave,loading:t.loading,icon:t.carousel.id?"edit":"save",class:"q-mb-xs","no-caps":""},null,8,["label","color","onClick","loading","icon"]),s(r,{label:"Cancelar",color:"negative",onClick:a[3]||(a[3]=l=>t.dialog=!1),icon:"cancel",loading:t.loading,class:"q-mb-xs","no-caps":""},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var I=f(V,[["render",S]]);export{I as default};
